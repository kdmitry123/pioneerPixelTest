# pioneerPixelTest

-----------------------------------------------------------------------------------------
Swagger page http://localhost:8080/swagger-ui/index.html#/

-----------------------------------------------------------------------------------------
Для получения токена необходимо отправить запрос POST на http://localhost:8080/api/auth/login с параметрами username и password

Пример запроса:
```json
{
  "username": "test1",
  "password": "test"
}
```
В ответе приходит токен:
```json
{
  "token": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmZWE4MWYzZS1jMjYwLTQ2ZTMtOGVjYi1hY2RjMzY2NGIxYzciLCJpYXQiOjE3NDcyOTc0NzcsImV4cCI6MTc0NzM4Mzg3N30.nYKIGKH3O1_V57xXBpu6aaisJ-5uAclpRACbv7Zrs0s"
}
```
Время жизни токена 24 часа. Устанавливается в application.yml:
```yaml
jwt:
  secret-key: secret
  expiration-time: 86400000
```

Для вызова PUT/POST эндпоинтов в хидерах запросов в Authorization нужно передавать полученный токен.

Эндпоинты /api/auth/login и GET /api/users/** публичные.

-----------------------------------------------------------------------------------------
Периодичность автоматического увеличения баланса (по умолчанию установлено на 30 секунд) устанавливается в application.yml:
```yaml
balance:
  increase-period: 30      # указывается количество секунд
```
Значение баланса при запуске приложения считается как начальное. Раз в 30 секунд добавляется 10% от текущего значения пока баланс не достигнет максимальной величины (не более 207% от первоначального значения).

-----------------------------------------------------------------------------------------
Для всего кода тесты не писал. Добавил несколько классов с unit-тестами и класс с интеграционными тестами. В интеграционных тестах данные в бд добавляются из скриптов для liquibase.